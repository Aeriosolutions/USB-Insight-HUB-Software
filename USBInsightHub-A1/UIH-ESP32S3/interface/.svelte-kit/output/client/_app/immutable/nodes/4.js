import{s as We,e as tt,n as y,h as dt,b as Fe,r as mt}from"../chunks/utils.js";import{q as Ct,H as Lt,r as It,g as _,u as Mt,d,v as ft,i as Y,G as St,o as Dt,b as i,s as v,e as pt,f as u,c as g,h as l,C as O,I as _t,n as rt,k as Ee,l as ye,w as a,D as te,y as be,J as bt,E as At,m as vt,x as gt}from"../chunks/scheduler.js";import{S as Xe,i as Ye,b as ne,d as oe,m as ie,a as J,t as K,e as ue,g as qt,c as Bt,o as Vt,p as Ge}from"../chunks/index.js";import{h as kt,u as wt}from"../chunks/await_block.js";import{g as Nt,u as xt,c as Je,s as Ze}from"../chunks/index2.js";import{I as Pt}from"../chunks/InputPassword.js";import{S as Tt}from"../chunks/SettingsCard.js";import{p as $t}from"../chunks/stores.js";import{n as Ke}from"../chunks/notifications.js";import{S as Et}from"../chunks/Spinner.js";import{C as Ht}from"../chunks/Collapsible.js";import{T as lt}from"../chunks/topology-star-3.js";import{I as jt}from"../chunks/info-circle.js";const Ut=async()=>({title:"MQTT"}),Ir=Object.freeze(Object.defineProperty({__proto__:null,load:Ut},Symbol.toStringTag,{value:"Module"}));function Qt(s){let e,r,t='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm6-4v2m-3 8v9m6-9v9M5 16l4-2m6 0l4 2M9 18h6M10 8v.01M14 8v.01"/>',o=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s[0]],n={};for(let c=0;c<o.length;c+=1)n=tt(n,o[c]);return{c(){e=Ct("svg"),r=new Lt(!0),this.h()},l(c){e=It(c,"svg",{viewBox:!0,width:!0,height:!0});var p=_(e);r=Mt(p,!0),p.forEach(d),this.h()},h(){r.a=null,ft(e,n)},m(c,p){Y(c,e,p),r.m(t,e)},p(c,[p]){ft(e,n=Nt(o,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},p&1&&c[0]]))},i:y,o:y,d(c){c&&d(e)}}}function zt(s,e,r){return s.$$set=t=>{r(0,e=tt(tt({},e),dt(t)))},e=dt(e),[e]}class Ot extends Xe{constructor(e){super(),Ye(this,e,zt,Qt,We,{})}}function Rt(s){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function Ft(s){let e,r,t,o,n,c,p,f,C="Status",P,k,H,x,U,h,R,B,V,Z="Client ID",re,D,m=s[1].client_id+"",N,M,L;o=new lt({props:{class:"h-auto w-full scale-75 "+(s[1].connected===!0?"text-success-content":"text-error-content")}});function de(b,I){return b[1].connected?Zt:b[1].enabled?Gt:Jt}let Q=de(s),A=Q(s);return h=new Ot({props:{class:"text-primary-content h-auto w-full scale-75"}}),{c(){e=i("div"),r=i("div"),t=i("div"),ne(o.$$.fragment),c=v(),p=i("div"),f=i("div"),f.textContent=C,P=v(),k=i("div"),A.c(),H=v(),x=i("div"),U=i("div"),ne(h.$$.fragment),R=v(),B=i("div"),V=i("div"),V.textContent=Z,re=v(),D=i("div"),N=Ee(m),this.h()},l(b){e=u(b,"DIV",{class:!0});var I=_(e);r=u(I,"DIV",{class:!0});var W=_(r);t=u(W,"DIV",{class:!0});var ve=_(t);oe(o.$$.fragment,ve),ve.forEach(d),c=g(W),p=u(W,"DIV",{});var S=_(p);f=u(S,"DIV",{class:!0,"data-svelte-h":!0}),O(f)!=="svelte-yizsky"&&(f.textContent=C),P=g(S),k=u(S,"DIV",{class:!0});var X=_(k);A.l(X),X.forEach(d),S.forEach(d),W.forEach(d),H=g(I),x=u(I,"DIV",{class:!0});var fe=_(x);U=u(fe,"DIV",{class:!0});var ee=_(U);oe(h.$$.fragment,ee),ee.forEach(d),R=g(fe),B=u(fe,"DIV",{});var T=_(B);V=u(T,"DIV",{class:!0,"data-svelte-h":!0}),O(V)!=="svelte-6cwb7m"&&(V.textContent=Z),re=g(T),D=u(T,"DIV",{class:!0});var ge=_(D);N=ye(ge,m),ge.forEach(d),T.forEach(d),fe.forEach(d),I.forEach(d),this.h()},h(){l(t,"class",n="mask mask-hexagon h-auto w-10 "+(s[1].connected===!0?"bg-success":"bg-error")),l(f,"class","font-bold"),l(k,"class","text-sm opacity-75"),l(r,"class","rounded-box bg-base-100 flex items-center space-x-3 px-4 py-2"),l(U,"class","mask mask-hexagon bg-primary h-auto w-10"),l(V,"class","font-bold"),l(D,"class","text-sm opacity-75"),l(x,"class","rounded-box bg-base-100 flex items-center space-x-3 px-4 py-2"),l(e,"class","flex w-full flex-col space-y-1")},m(b,I){Y(b,e,I),a(e,r),a(r,t),ie(o,t,null),a(r,c),a(r,p),a(p,f),a(p,P),a(p,k),A.m(k,null),a(e,H),a(e,x),a(x,U),ie(h,U,null),a(x,R),a(x,B),a(B,V),a(B,re),a(B,D),a(D,N),L=!0},p(b,I){const W={};I&2&&(W.class="h-auto w-full scale-75 "+(b[1].connected===!0?"text-success-content":"text-error-content")),o.$set(W),(!L||I&2&&n!==(n="mask mask-hexagon h-auto w-10 "+(b[1].connected===!0?"bg-success":"bg-error")))&&l(t,"class",n),Q===(Q=de(b))&&A?A.p(b,I):(A.d(1),A=Q(b),A&&(A.c(),A.m(k,null))),(!L||I&2)&&m!==(m=b[1].client_id+"")&&vt(N,m)},i(b){L||(J(o.$$.fragment,b),J(h.$$.fragment,b),b&&gt(()=>{L&&(M||(M=Ge(e,Ze,{duration:300,easing:Je},!0)),M.run(1))}),L=!0)},o(b){K(o.$$.fragment,b),K(h.$$.fragment,b),b&&(M||(M=Ge(e,Ze,{duration:300,easing:Je},!1)),M.run(0)),L=!1},d(b){b&&d(e),ue(o),A.d(),ue(h),b&&M&&M.end()}}}function Gt(s){let e=s[1].last_error+"",r;return{c(){r=Ee(e)},l(t){r=ye(t,e)},m(t,o){Y(t,r,o)},p(t,o){o&2&&e!==(e=t[1].last_error+"")&&vt(r,e)},d(t){t&&d(r)}}}function Jt(s){let e;return{c(){e=Ee("MQTT Disabled")},l(r){e=ye(r,"MQTT Disabled")},m(r,t){Y(r,e,t)},p:y,d(r){r&&d(e)}}}function Zt(s){let e;return{c(){e=Ee("Connected")},l(r){e=ye(r,"Connected")},m(r,t){Y(r,e,t)},p:y,d(r){r&&d(e)}}}function Kt(s){let e,r;return e=new Et({}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p:y,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function ht(s){let e,r;return e=new Ht({props:{open:!1,class:"shadow-lg",$$slots:{title:[Xt],default:[Wt]},$$scope:{ctx:s}}}),e.$on("closed",s[7]),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p(t,o){const n={};o&1048589&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function Wt(s){let e,r,t,o,n,c,p="Enable MQTT",f,C,P,k,H,x='<span class="label-text text-md">URI</span>',U,h,R,B,V,Z,re,D,m,N,M,L='<span class="label-text text-md">Username</span>',de,Q,A,b,I,W='<span class="label-text text-md">Password</span>',ve,S,X,fe,ee,T,ge='<span class="label-text text-md">Client ID</span>',Me,F,pe,le,ae,Ae='<span class="label-text text-md">Keep Alive</span>',$e,se,q,Se,ce,G,qe="Seconds",Be,w,$,Ce,he,ke,me,_e,we,xe,He="Clean Session?",Te,Le,Ve,De,at='<button class="btn btn-primary" type="submit">Apply Settings</button>',Ie,et,st;function yt(E){s[12](E)}let nt={id:"pwd"};return s[0].password!==void 0&&(nt.value=s[0].password),S=new Pt({props:nt}),rt.push(()=>Vt(S,"value",yt)),{c(){e=i("form"),r=i("div"),t=i("label"),o=i("input"),n=v(),c=i("span"),c.textContent=p,f=v(),C=i("div"),P=v(),k=i("div"),H=i("label"),H.innerHTML=x,U=v(),h=i("input"),B=v(),V=i("label"),Z=i("span"),re=Ee("Must be a valid URI"),m=v(),N=i("div"),M=i("label"),M.innerHTML=L,de=v(),Q=i("input"),A=v(),b=i("div"),I=i("label"),I.innerHTML=W,ve=v(),ne(S.$$.fragment),fe=v(),ee=i("div"),T=i("label"),T.innerHTML=ge,Me=v(),F=i("input"),pe=v(),le=i("div"),ae=i("label"),ae.innerHTML=Ae,$e=v(),se=i("label"),q=i("input"),ce=v(),G=i("span"),G.textContent=qe,Be=v(),w=i("label"),$=i("span"),Ce=Ee("Must be between 1 and 600 seconds"),ke=v(),me=i("label"),_e=i("input"),we=v(),xe=i("span"),xe.textContent=He,Te=v(),Le=i("div"),Ve=v(),De=i("div"),De.innerHTML=at,this.h()},l(E){e=u(E,"FORM",{});var j=_(e);r=u(j,"DIV",{class:!0});var z=_(r);t=u(z,"LABEL",{class:!0});var je=_(t);o=u(je,"INPUT",{type:!0,class:!0}),n=g(je),c=u(je,"SPAN",{"data-svelte-h":!0}),O(c)!=="svelte-1xm9qiz"&&(c.textContent=p),je.forEach(d),f=g(z),C=u(z,"DIV",{class:!0}),_(C).forEach(d),P=g(z),k=u(z,"DIV",{class:!0});var Ne=_(k);H=u(Ne,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(H)!=="svelte-3joszr"&&(H.innerHTML=x),U=g(Ne),h=u(Ne,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),B=g(Ne),V=u(Ne,"LABEL",{class:!0,for:!0});var ot=_(V);Z=u(ot,"SPAN",{class:!0});var it=_(Z);re=ye(it,"Must be a valid URI"),it.forEach(d),ot.forEach(d),Ne.forEach(d),m=g(z),N=u(z,"DIV",{});var Ue=_(N);M=u(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(M)!=="svelte-w3c29a"&&(M.innerHTML=L),de=g(Ue),Q=u(Ue,"INPUT",{type:!0,class:!0,id:!0}),Ue.forEach(d),A=g(z),b=u(z,"DIV",{});var Qe=_(b);I=u(Qe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(I)!=="svelte-1b9ak8x"&&(I.innerHTML=W),ve=g(Qe),oe(S.$$.fragment,Qe),Qe.forEach(d),fe=g(z),ee=u(z,"DIV",{});var ze=_(ee);T=u(ze,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(T)!=="svelte-qq41wd"&&(T.innerHTML=ge),Me=g(ze),F=u(ze,"INPUT",{type:!0,class:!0,id:!0}),ze.forEach(d),pe=g(z),le=u(z,"DIV",{});var Pe=_(le);ae=u(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(ae)!=="svelte-1pztk6r"&&(ae.innerHTML=Ae),$e=g(Pe),se=u(Pe,"LABEL",{for:!0,class:!0});var Oe=_(se);q=u(Oe,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),ce=g(Oe),G=u(Oe,"SPAN",{"data-svelte-h":!0}),O(G)!=="svelte-1wvw9tt"&&(G.textContent=qe),Oe.forEach(d),Be=g(Pe),w=u(Pe,"LABEL",{for:!0,class:!0});var ut=_(w);$=u(ut,"SPAN",{class:!0});var ct=_($);Ce=ye(ct,"Must be between 1 and 600 seconds"),ct.forEach(d),ut.forEach(d),Pe.forEach(d),ke=g(z),me=u(z,"LABEL",{class:!0});var Re=_(me);_e=u(Re,"INPUT",{type:!0,class:!0}),we=g(Re),xe=u(Re,"SPAN",{class:!0,"data-svelte-h":!0}),O(xe)!=="svelte-l47zf3"&&(xe.textContent=He),Re.forEach(d),z.forEach(d),Te=g(j),Le=u(j,"DIV",{class:!0}),_(Le).forEach(d),Ve=g(j),De=u(j,"DIV",{class:!0,"data-svelte-h":!0}),O(De)!=="svelte-19wrugp"&&(De.innerHTML=at),j.forEach(d),this.h()},h(){l(o,"type","checkbox"),l(o,"class","checkbox checkbox-primary"),l(t,"class","label inline-flex cursor-pointer content-end justify-start gap-4"),l(C,"class","hidden sm:block"),l(H,"class","label"),l(H,"for","host"),l(h,"type","text"),l(h,"class",R="input input-bordered invalid:border-error w-full invalid:border-2 "+(s[3].host?"border-error border-2":"")),l(h,"id","host"),l(h,"min","3"),l(h,"max","64"),h.required=!0,l(Z,"class",D="label-text-alt text-error "+(s[3].host?"":"hidden")),l(V,"class","label"),l(V,"for","host"),l(k,"class","sm:col-span-2"),l(M,"class","label"),l(M,"for","user"),l(Q,"type","text"),l(Q,"class","input input-bordered w-full"),l(Q,"id","user"),l(I,"class","label"),l(I,"for","pwd"),l(T,"class","label"),l(T,"for","clientid"),l(F,"type","text"),l(F,"class","input input-bordered w-full"),l(F,"id","clientid"),l(ae,"class","label"),l(ae,"for","keepalive"),l(q,"type","number"),l(q,"min","1"),l(q,"max","600"),l(q,"class",Se="input input-bordered invalid:border-error w-full invalid:border-2 "+(s[3].keep_alive?"border-error border-2":"")),l(q,"id","keepalive"),q.required=!0,l(se,"for","keepalive"),l(se,"class","input-group"),l($,"class",he="label-text-alt text-error "+(s[3].keep_alive?"":"hidden")),l(w,"for","keepalive"),l(w,"class","label"),l(_e,"type","checkbox"),l(_e,"class","checkbox checkbox-primary"),l(xe,"class",""),l(me,"class","label inline-flex cursor-pointer content-end justify-start gap-4"),l(r,"class","grid w-full grid-cols-1 content-center gap-x-4 px-4 sm:grid-cols-2"),l(Le,"class","divider mb-2 mt-0"),l(De,"class","mx-4 flex flex-wrap justify-end gap-2"),e.noValidate=!0},m(E,j){Y(E,e,j),a(e,r),a(r,t),a(t,o),o.checked=s[0].enabled,a(t,n),a(t,c),a(r,f),a(r,C),a(r,P),a(r,k),a(k,H),a(k,U),a(k,h),te(h,s[0].uri),a(k,B),a(k,V),a(V,Z),a(Z,re),a(r,m),a(r,N),a(N,M),a(N,de),a(N,Q),te(Q,s[0].username),a(r,A),a(r,b),a(b,I),a(b,ve),ie(S,b,null),a(r,fe),a(r,ee),a(ee,T),a(ee,Me),a(ee,F),te(F,s[0].client_id),a(r,pe),a(r,le),a(le,ae),a(le,$e),a(le,se),a(se,q),te(q,s[0].keep_alive),a(se,ce),a(se,G),a(le,Be),a(le,w),a(w,$),a($,Ce),a(r,ke),a(r,me),a(me,_e),_e.checked=s[0].clean_session,a(me,we),a(me,xe),a(e,Te),a(e,Le),a(e,Ve),a(e,De),s[16](e),Ie=!0,et||(st=[be(o,"change",s[9]),be(h,"input",s[10]),be(Q,"input",s[11]),be(F,"input",s[13]),be(q,"input",s[14]),be(_e,"change",s[15]),be(e,"submit",bt(s[8]))],et=!0)},p(E,j){j&1&&(o.checked=E[0].enabled),(!Ie||j&8&&R!==(R="input input-bordered invalid:border-error w-full invalid:border-2 "+(E[3].host?"border-error border-2":"")))&&l(h,"class",R),j&1&&h.value!==E[0].uri&&te(h,E[0].uri),(!Ie||j&8&&D!==(D="label-text-alt text-error "+(E[3].host?"":"hidden")))&&l(Z,"class",D),j&1&&Q.value!==E[0].username&&te(Q,E[0].username);const z={};!X&&j&1&&(X=!0,z.value=E[0].password,At(()=>X=!1)),S.$set(z),j&1&&F.value!==E[0].client_id&&te(F,E[0].client_id),(!Ie||j&8&&Se!==(Se="input input-bordered invalid:border-error w-full invalid:border-2 "+(E[3].keep_alive?"border-error border-2":"")))&&l(q,"class",Se),j&1&&_t(q.value)!==E[0].keep_alive&&te(q,E[0].keep_alive),(!Ie||j&8&&he!==(he="label-text-alt text-error "+(E[3].keep_alive?"":"hidden")))&&l($,"class",he),j&1&&(_e.checked=E[0].clean_session)},i(E){Ie||(J(S.$$.fragment,E),Ie=!0)},o(E){K(S.$$.fragment,E),Ie=!1},d(E){E&&d(e),ue(S),s[16](null),et=!1,mt(st)}}}function Xt(s){let e,r="Change MQTT Settings";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),O(e)!=="svelte-1pncc4g"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){Y(t,e,o)},p:y,d(t){t&&d(e)}}}function Yt(s){let e,r,t,o,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Kt,then:Ft,catch:Rt,value:19,blocks:[,,,]};kt(s[6](),n);let c=(!s[5].data.features.security||s[4].admin)&&ht(s);return{c(){e=i("div"),n.block.c(),r=v(),c&&c.c(),t=pt(),this.h()},l(p){e=u(p,"DIV",{class:!0});var f=_(e);n.block.l(f),f.forEach(d),r=g(p),c&&c.l(p),t=pt(),this.h()},h(){l(e,"class","w-full overflow-x-auto")},m(p,f){Y(p,e,f),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null,Y(p,r,f),c&&c.m(p,f),Y(p,t,f),o=!0},p(p,f){s=p,wt(n,s,f),!s[5].data.features.security||s[4].admin?c?(c.p(s,f),f&48&&J(c,1)):(c=ht(s),c.c(),J(c,1),c.m(t.parentNode,t)):c&&(qt(),K(c,1,1,()=>{c=null}),Bt())},i(p){o||(J(n.block),J(c),o=!0)},o(p){for(let f=0;f<3;f+=1){const C=n.blocks[f];K(C)}K(c),o=!1},d(p){p&&(d(e),d(r),d(t)),n.block.d(),n.token=null,n=null,c&&c.d(p)}}}function er(s){let e,r;return e=new lt({props:{slot:"icon",class:"lex-shrink-0 mr-2 h-6 w-6 self-end"}}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p:y,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function tr(s){let e,r="MQTT";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),O(e)!=="svelte-onyccr"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){Y(t,e,o)},p:y,d(t){t&&d(e)}}}function rr(s){let e,r;return e=new Tt({props:{collapsible:!1,$$slots:{title:[tr],icon:[er],default:[Yt]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p(t,[o]){const n={};o&1048639&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function lr(s,e,r){let t,o;Fe(s,xt,m=>r(4,t=m)),Fe(s,$t,m=>r(5,o=m));let n,c,p;async function f(){try{const m=await fetch("/rest/mqttStatus",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(1,c=await m.json())}catch(m){console.error("Error:",m)}return c}async function C(){try{const m=await fetch("/rest/mqttSettings",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(0,n=await m.json())}catch(m){console.error("Error:",m)}return n}const P=setInterval(async()=>{f()},5e3);St(()=>clearInterval(P)),Dt(()=>{(!o.data.features.security||t.admin)&&C()});let k={host:!1,port:!1,keep_alive:!1,topic_length:!1};async function H(m){try{const N=await fetch("/rest/mqttSettings",{method:"POST",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"},body:JSON.stringify(m)});N.status==200?(Ke.success("MQTT settings updated.",3e3),r(0,n=await N.json())):Ke.error("User not authorized.",3e3)}catch(N){console.error("Error:",N)}}function x(){let m=!0;/(([-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4})|(\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b))(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i.test(n.uri)?r(3,k.host=!1,k):(m=!1,r(3,k.host=!0,k));let M=Number(n.keep_alive);1<=M&&M<=600?r(3,k.keep_alive=!1,k):(r(3,k.keep_alive=!0,k),m=!1),m&&H(n)}function U(){n.enabled=this.checked,r(0,n)}function h(){n.uri=this.value,r(0,n)}function R(){n.username=this.value,r(0,n)}function B(m){s.$$.not_equal(n.password,m)&&(n.password=m,r(0,n))}function V(){n.client_id=this.value,r(0,n)}function Z(){n.keep_alive=_t(this.value),r(0,n)}function re(){n.clean_session=this.checked,r(0,n)}function D(m){rt[m?"unshift":"push"](()=>{p=m,r(2,p)})}return[n,c,p,k,t,o,f,C,x,U,h,R,B,V,Z,re,D]}class ar extends Xe{constructor(e){super(),Ye(this,e,lr,rr,We,{})}}function sr(s){return{c:y,l:y,m:y,p:y,i:y,o:y,d:y}}function nr(s){let e,r,t,o,n,c=`The LED is controllable via MQTT with the demo project designed to work with Home
						Assistant's auto discovery feature.`,p,f,C,P,k='<span class="label-text text-md">Unique ID</span>',H,x,U,h,R,B,V,Z,re,D,m,N='<span class="label-text text-md">Name</span>',M,L,de,Q,A,b,I,W,ve,S,X,fe='<span class="label-text text-md">MQTT Path</span>',ee,T,ge,Me,F,pe,le,ae,Ae,$e,se,q,Se='<button class="btn btn-primary" type="submit">Apply Settings</button>',ce,G,qe,Be;return t=new jt({props:{class:"h-6 w-6 flex-shrink-0 stroke-current"}}),{c(){e=i("form"),r=i("div"),ne(t.$$.fragment),o=v(),n=i("span"),n.textContent=c,p=v(),f=i("div"),C=i("div"),P=i("label"),P.innerHTML=k,H=v(),x=i("input"),h=v(),R=i("label"),B=i("span"),V=Ee("Unique ID must be between 3 and 32 characters long"),re=v(),D=i("div"),m=i("label"),m.innerHTML=N,M=v(),L=i("input"),Q=v(),A=i("label"),b=i("span"),I=Ee("Name must be between 3 and 32 characters long"),ve=v(),S=i("div"),X=i("label"),X.innerHTML=fe,ee=v(),T=i("input"),Me=v(),F=i("label"),pe=i("span"),le=Ee("MQTT path is limited to 64 characters"),Ae=v(),$e=i("div"),se=v(),q=i("div"),q.innerHTML=Se,this.h()},l(w){e=u(w,"FORM",{});var $=_(e);r=u($,"DIV",{class:!0});var Ce=_(r);oe(t.$$.fragment,Ce),o=g(Ce),n=u(Ce,"SPAN",{"data-svelte-h":!0}),O(n)!=="svelte-1r3kcmm"&&(n.textContent=c),Ce.forEach(d),p=g($),f=u($,"DIV",{class:!0});var he=_(f);C=u(he,"DIV",{});var ke=_(C);P=u(ke,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(P)!=="svelte-qfhemx"&&(P.innerHTML=k),H=g(ke),x=u(ke,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),h=g(ke),R=u(ke,"LABEL",{class:!0,for:!0});var me=_(R);B=u(me,"SPAN",{class:!0});var _e=_(B);V=ye(_e,"Unique ID must be between 3 and 32 characters long"),_e.forEach(d),me.forEach(d),ke.forEach(d),re=g(he),D=u(he,"DIV",{});var we=_(D);m=u(we,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(m)!=="svelte-1ds62kb"&&(m.innerHTML=N),M=g(we),L=u(we,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),Q=g(we),A=u(we,"LABEL",{class:!0,for:!0});var xe=_(A);b=u(xe,"SPAN",{class:!0});var He=_(b);I=ye(He,"Name must be between 3 and 32 characters long"),He.forEach(d),xe.forEach(d),we.forEach(d),ve=g(he),S=u(he,"DIV",{});var Te=_(S);X=u(Te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(X)!=="svelte-10qo2tt"&&(X.innerHTML=fe),ee=g(Te),T=u(Te,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),Me=g(Te),F=u(Te,"LABEL",{class:!0,for:!0});var Le=_(F);pe=u(Le,"SPAN",{class:!0});var Ve=_(pe);le=ye(Ve,"MQTT path is limited to 64 characters"),Ve.forEach(d),Le.forEach(d),Te.forEach(d),he.forEach(d),Ae=g($),$e=u($,"DIV",{class:!0}),_($e).forEach(d),se=g($),q=u($,"DIV",{class:!0,"data-svelte-h":!0}),O(q)!=="svelte-19wrugp"&&(q.innerHTML=Se),$.forEach(d),this.h()},h(){l(r,"class","alert alert-info my-2 shadow-lg"),l(P,"class","label"),l(P,"for","uid"),l(x,"type","text"),l(x,"class",U="input input-bordered invalid:border-error w-full invalid:border-2 "+(s[2].uid?"border-error border-2":"")),l(x,"id","uid"),l(x,"min","3"),l(x,"max","32"),x.required=!0,l(B,"class",Z="label-text-alt text-error "+(s[2].uid?"":"hidden")),l(R,"class","label"),l(R,"for","uid"),l(m,"class","label"),l(m,"for","name"),l(L,"type","text"),l(L,"class",de="input input-bordered invalid:border-error w-full invalid:border-2 "+(s[2].name?"border-error border-2":"")),l(L,"id","name"),l(L,"min","3"),l(L,"max","32"),L.required=!0,l(b,"class",W="label-text-alt text-error "+(s[2].name?"":"hidden")),l(A,"class","label"),l(A,"for","name"),l(X,"class","label"),l(X,"for","path"),l(T,"type","text"),l(T,"class",ge="input input-bordered invalid:border-error w-full invalid:border-2 "+(s[2].path?"border-error border-2":"")),l(T,"id","path"),l(T,"min","0"),l(T,"max","64"),T.required=!0,l(pe,"class",ae="label-text-alt text-error "+(s[2].path?"":"hidden")),l(F,"class","label"),l(F,"for","path"),l(f,"class","grid w-full grid-cols-1 content-center gap-x-4 px-4"),l($e,"class","divider mb-2 mt-0"),l(q,"class","mx-4 flex flex-wrap justify-end gap-2"),e.noValidate=!0},m(w,$){Y(w,e,$),a(e,r),ie(t,r,null),a(r,o),a(r,n),a(e,p),a(e,f),a(f,C),a(C,P),a(C,H),a(C,x),te(x,s[0].unique_id),a(C,h),a(C,R),a(R,B),a(B,V),a(f,re),a(f,D),a(D,m),a(D,M),a(D,L),te(L,s[0].name),a(D,Q),a(D,A),a(A,b),a(b,I),a(f,ve),a(f,S),a(S,X),a(S,ee),a(S,T),te(T,s[0].mqtt_path),a(S,Me),a(S,F),a(F,pe),a(pe,le),a(e,Ae),a(e,$e),a(e,se),a(e,q),s[8](e),G=!0,qe||(Be=[be(x,"input",s[5]),be(L,"input",s[6]),be(T,"input",s[7]),be(e,"submit",bt(s[4]))],qe=!0)},p(w,$){(!G||$&4&&U!==(U="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[2].uid?"border-error border-2":"")))&&l(x,"class",U),$&1&&x.value!==w[0].unique_id&&te(x,w[0].unique_id),(!G||$&4&&Z!==(Z="label-text-alt text-error "+(w[2].uid?"":"hidden")))&&l(B,"class",Z),(!G||$&4&&de!==(de="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[2].name?"border-error border-2":"")))&&l(L,"class",de),$&1&&L.value!==w[0].name&&te(L,w[0].name),(!G||$&4&&W!==(W="label-text-alt text-error "+(w[2].name?"":"hidden")))&&l(b,"class",W),(!G||$&4&&ge!==(ge="input input-bordered invalid:border-error w-full invalid:border-2 "+(w[2].path?"border-error border-2":"")))&&l(T,"class",ge),$&1&&T.value!==w[0].mqtt_path&&te(T,w[0].mqtt_path),(!G||$&4&&ae!==(ae="label-text-alt text-error "+(w[2].path?"":"hidden")))&&l(pe,"class",ae)},i(w){G||(J(t.$$.fragment,w),w&&gt(()=>{G&&(ce||(ce=Ge(e,Ze,{duration:300,easing:Je},!0)),ce.run(1))}),G=!0)},o(w){K(t.$$.fragment,w),w&&(ce||(ce=Ge(e,Ze,{duration:300,easing:Je},!1)),ce.run(0)),G=!1},d(w){w&&d(e),ue(t),s[8](null),w&&ce&&ce.end(),qe=!1,mt(Be)}}}function or(s){let e,r;return e=new Et({}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p:y,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function ir(s){let e,r,t={ctx:s,current:null,token:null,hasCatch:!1,pending:or,then:nr,catch:sr,value:12,blocks:[,,,]};return kt(s[3](),t),{c(){e=i("div"),t.block.c(),this.h()},l(o){e=u(o,"DIV",{class:!0});var n=_(e);t.block.l(n),n.forEach(d),this.h()},h(){l(e,"class","w-full overflow-x-auto")},m(o,n){Y(o,e,n),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,r=!0},p(o,n){s=o,wt(t,s,n)},i(o){r||(J(t.block),r=!0)},o(o){for(let n=0;n<3;n+=1){const c=t.blocks[n];K(c)}r=!1},d(o){o&&d(e),t.block.d(),t.token=null,t=null}}}function ur(s){let e,r;return e=new lt({props:{slot:"icon",class:"lex-shrink-0 mr-2 h-6 w-6 self-end"}}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p:y,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function cr(s){let e,r="MQTT Broker Settings";return{c(){e=i("span"),e.textContent=r,this.h()},l(t){e=u(t,"SPAN",{slot:!0,"data-svelte-h":!0}),O(e)!=="svelte-xvjdcx"&&(e.textContent=r),this.h()},h(){l(e,"slot","title")},m(t,o){Y(t,e,o)},p:y,d(t){t&&d(e)}}}function dr(s){let e,r;return e=new Tt({props:{collapsible:!0,open:!1,$$slots:{title:[cr],icon:[ur],default:[ir]},$$scope:{ctx:s}}}),{c(){ne(e.$$.fragment)},l(t){oe(e.$$.fragment,t)},m(t,o){ie(e,t,o),r=!0},p(t,[o]){const n={};o&8199&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ue(e,t)}}}function fr(s,e,r){let t,o;Fe(s,xt,h=>r(9,t=h)),Fe(s,$t,h=>r(10,o=h));let n,c;async function p(){try{const h=await fetch("/rest/brokerSettings",{method:"GET",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"}});r(0,n=await h.json())}catch(h){console.error("Error:",h)}}let f={uid:!1,path:!1,name:!1};async function C(){try{const h=await fetch("/rest/brokerSettings",{method:"POST",headers:{Authorization:o.data.features.security?"Bearer "+t.bearer_token:"Basic","Content-Type":"application/json"},body:JSON.stringify(n)});h.status==200?(Ke.success("Broker settings updated.",3e3),r(0,n=await h.json())):Ke.error("User not authorized.",3e3)}catch(h){console.error("Error:",h)}}function P(){let h=!0;n.unique_id.length<3||n.unique_id.length>32?(h=!1,r(2,f.uid=!0,f)):r(2,f.uid=!1,f),n.name.length<3||n.name.length>32?(h=!1,r(2,f.name=!0,f)):r(2,f.name=!1,f),n.mqtt_path.length>64?(h=!1,r(2,f.path=!0,f)):r(2,f.path=!1,f),h&&C()}function k(){n.unique_id=this.value,r(0,n)}function H(){n.name=this.value,r(0,n)}function x(){n.mqtt_path=this.value,r(0,n)}function U(h){rt[h?"unshift":"push"](()=>{c=h,r(1,c)})}return[n,c,f,p,P,k,H,x,U]}class pr extends Xe{constructor(e){super(),Ye(this,e,fr,dr,We,{})}}function hr(s){let e,r,t,o,n;return r=new ar({}),o=new pr({}),{c(){e=i("div"),ne(r.$$.fragment),t=v(),ne(o.$$.fragment),this.h()},l(c){e=u(c,"DIV",{class:!0});var p=_(e);oe(r.$$.fragment,p),t=g(p),oe(o.$$.fragment,p),p.forEach(d),this.h()},h(){l(e,"class","mx-0 my-1 flex flex-col space-y-4 sm:mx-8 sm:my-8")},m(c,p){Y(c,e,p),ie(r,e,null),a(e,t),ie(o,e,null),n=!0},p:y,i(c){n||(J(r.$$.fragment,c),J(o.$$.fragment,c),n=!0)},o(c){K(r.$$.fragment,c),K(o.$$.fragment,c),n=!1},d(c){c&&d(e),ue(r),ue(o)}}}function mr(s,e,r){let{data:t}=e;return s.$$set=o=>{"data"in o&&r(0,t=o.data)},[t]}class Mr extends Xe{constructor(e){super(),Ye(this,e,mr,hr,We,{data:0})}}export{Mr as component,Ir as universal};
