import{o as Y,s as Ce,e as ee,n as pe,h as _e,f as Ue,k as Xe,r as ze}from"./utils.js";import{q as Le,H as Oe,r as qe,g as B,u as De,d as M,v as ve,i as ye,e as Se,p as se,b as q,k as oe,s as ne,f as D,l as fe,c as re,h as R,w as x,y as le,m as ue,x as Ye,N as Me}from"./scheduler.js";import{S as Ee,i as xe,a as J,g as we,t as $,c as ke,b as ce,d as Pe,m as de,e as he,p as Ae}from"./index.js";import{w as be}from"./singletons.js";import{g as Ge}from"./_commonjsHelpers.js";import{g as Ve,f as Ke}from"./index2.js";const ge=be(!1),me=be(null),U=be([]),Ne=be(null);function _t(){var r,s;const a=Y(U).length,t=Y(U)[a-1];return(r=t==null?void 0:t.callbacks)!=null&&r.onBeforeClose&&((s=t==null?void 0:t.callbacks)==null?void 0:s.onBeforeClose())===!1?!1:(U.set([]),!0)}function Ie(a=1){var s,f;const t=Y(U).length,r=Y(U)[t-1];return Y(me)||(s=r==null?void 0:r.callbacks)!=null&&s.onBeforeClose&&((f=r==null?void 0:r.callbacks)==null?void 0:f.onBeforeClose())===!1?!1:(Y(ge)&&t>0&&me.set(!0),ge.set(!1),Ne.set("pop"),Qe(a),!0)}function Je(){return Ie(1)}function vt(a,t,r){Y(me)||(Ne.set("push"),Y(ge)&&Y(U).length&&me.set(!0),ge.set(!1),r!=null&&r.replace?U.update(s=>[...s.slice(0,s.length-1),{component:a,props:t}]):U.update(s=>[...s,{component:a,props:t}]))}function gt(a){U.update(t=>{const r=t[t.length-1];return r.callbacks={...r.callbacks,onBeforeClose:a},t})}function Qe(a=1){U.update(t=>t.slice(0,Math.max(0,t.length-a)))}var je={exports:{}};(function(a){(function(t,r,s){if(!t)return;for(var f={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},m={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P,S=1;S<20;++S)f[111+S]="f"+S;for(S=0;S<=9;++S)f[S+96]=S.toString();function i(e,n,u){if(e.addEventListener){e.addEventListener(n,u,!1);return}e.attachEvent("on"+n,u)}function w(e){if(e.type=="keypress"){var n=String.fromCharCode(e.which);return e.shiftKey||(n=n.toLowerCase()),n}return f[e.which]?f[e.which]:g[e.which]?g[e.which]:String.fromCharCode(e.which).toLowerCase()}function A(e,n){return e.sort().join(",")===n.sort().join(",")}function V(e){var n=[];return e.shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n}function O(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}function k(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}function N(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function I(){if(!P){P={};for(var e in f)e>95&&e<112||f.hasOwnProperty(e)&&(P[f[e]]=e)}return P}function Q(e,n,u){return u||(u=I()[e]?"keydown":"keypress"),u=="keypress"&&n.length&&(u="keydown"),u}function te(e){return e==="+"?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function T(e,n){var u,p,L,j=[];for(u=te(e),L=0;L<u.length;++L)p=u[L],m[p]&&(p=m[p]),n&&n!="keypress"&&c[p]&&(p=c[p],j.push("shift")),N(p)&&j.push(p);return n=Q(p,j,n),{key:p,modifiers:j,action:n}}function y(e,n){return e===null||e===r?!1:e===n?!0:y(e.parentNode,n)}function b(e){var n=this;if(e=e||r,!(n instanceof b))return new b(e);n.target=e,n._callbacks={},n._directMap={};var u={},p,L=!1,j=!1,H=!1;function W(o){o=o||{};var l=!1,_;for(_ in u){if(o[_]){l=!0;continue}u[_]=0}l||(H=!1)}function X(o,l,_,d,h,K){var v,E,z=[],G=_.type;if(!n._callbacks[o])return[];for(G=="keyup"&&N(o)&&(l=[o]),v=0;v<n._callbacks[o].length;++v)if(E=n._callbacks[o][v],!(!d&&E.seq&&u[E.seq]!=E.level)&&G==E.action&&(G=="keypress"&&!_.metaKey&&!_.ctrlKey||A(l,E.modifiers))){var He=!d&&E.combo==h,Re=d&&E.seq==d&&E.level==K;(He||Re)&&n._callbacks[o].splice(v,1),z.push(E)}return z}function Z(o,l,_,d){n.stopCallback(l,l.target||l.srcElement,_,d)||o(l,_)===!1&&(O(l),k(l))}n._handleKey=function(o,l,_){var d=X(o,l,_),h,K={},v=0,E=!1;for(h=0;h<d.length;++h)d[h].seq&&(v=Math.max(v,d[h].level));for(h=0;h<d.length;++h){if(d[h].seq){if(d[h].level!=v)continue;E=!0,K[d[h].seq]=1,Z(d[h].callback,_,d[h].combo,d[h].seq);continue}E||Z(d[h].callback,_,d[h].combo)}var z=_.type=="keypress"&&j;_.type==H&&!N(o)&&!z&&W(K),j=E&&_.type=="keydown"};function F(o){typeof o.which!="number"&&(o.which=o.keyCode);var l=w(o);if(l){if(o.type=="keyup"&&L===l){L=!1;return}n.handleKey(l,V(o),o)}}function ie(){clearTimeout(p),p=setTimeout(W,1e3)}function ae(o,l,_,d){u[o]=0;function h(G){return function(){H=G,++u[o],ie()}}function K(G){Z(_,G,o),d!=="keyup"&&(L=w(G)),setTimeout(W,10)}for(var v=0;v<l.length;++v){var E=v+1===l.length,z=E?K:h(d||T(l[v+1]).action);C(l[v],z,d,o,v)}}function C(o,l,_,d,h){n._directMap[o+":"+_]=l,o=o.replace(/\s+/g," ");var K=o.split(" "),v;if(K.length>1){ae(o,K,l,_);return}v=T(o,_),n._callbacks[v.key]=n._callbacks[v.key]||[],X(v.key,v.modifiers,{type:v.action},d,o,h),n._callbacks[v.key][d?"unshift":"push"]({callback:l,modifiers:v.modifiers,action:v.action,seq:d,level:h,combo:o})}n._bindMultiple=function(o,l,_){for(var d=0;d<o.length;++d)C(o[d],l,_)},i(e,"keypress",F),i(e,"keydown",F),i(e,"keyup",F)}b.prototype.bind=function(e,n,u){var p=this;return e=e instanceof Array?e:[e],p._bindMultiple.call(p,e,n,u),p},b.prototype.unbind=function(e,n){var u=this;return u.bind.call(u,e,function(){},n)},b.prototype.trigger=function(e,n){var u=this;return u._directMap[e+":"+n]&&u._directMap[e+":"+n]({},e),u},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,n){var u=this;if((" "+n.className+" ").indexOf(" mousetrap ")>-1||y(n,u.target))return!1;if("composedPath"in e&&typeof e.composedPath=="function"){var p=e.composedPath()[0];p!==e.target&&(n=p)}return n.tagName=="INPUT"||n.tagName=="SELECT"||n.tagName=="TEXTAREA"||n.isContentEditable},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var n in e)e.hasOwnProperty(n)&&(f[n]=e[n]);P=null},b.init=function(){var e=b(r);for(var n in e)n.charAt(0)!=="_"&&(b[n]=function(u){return function(){return e[u].apply(e,arguments)}}(n))},b.init(),t.Mousetrap=b,a.exports&&(a.exports=b),typeof s=="function"&&s.amd&&s(function(){return b})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(je);var We=je.exports;const Be=Ge(We);function Ze(a){return(...t)=>a.reduce((r,s)=>r=[s(...r)],t||[])}function Fe(a){let t=document.defaultView.getComputedStyle(a,null);return t.getPropertyValue("display")!=="none"&&t.getPropertyValue("visibility")!=="hidden"}const $e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];function et(a){const t={"alt+tab":m,end:S,home:P,"shift+tab":m,down:c,tab:c,up:m};Object.entries(t).forEach(([i,w])=>{Be.bind(i,Ze([A=>({event:A}),r,s,f,g,w]))});function r(i){return i.event.preventDefault(),i}function s(i){return i.event.stopPropagation(),i}function f(i){let w=[...a.querySelectorAll($e)];return{...i,allFocusableItems:w.filter(Fe)}}function g(i){let w=document.activeElement;return w&&!a.contains(w)?i:{...i,currentlyFocusedItem:w}}function c({allFocusableItems:i,currentlyFocusedItem:w}){if(!w){i[0]&&i[0].focus();return}let A=i.indexOf(w);if(i.length-1===A){i[0]&&i[0].focus();return}i[A+1]&&i[A+1].focus()}function m({allFocusableItems:i,currentlyFocusedItem:w}){if(!w){i[i.length-1].focus();return}let A=i.indexOf(w);if(A===0){i[i.length-1]&&i[i.length-1].focus();return}i[A-1]&&i[A-1].focus()}function P({allFocusableItems:i}){i[0]&&i[0].focus()}function S({allFocusableItems:i}){i[i.length-1].focus()}return{destroy(){Object.keys(t).forEach(i=>Be.unbind(i))}}}function tt(a){let t,r,s='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6L6 18M6 6l12 12"/>',f=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},a[0]],g={};for(let c=0;c<f.length;c+=1)g=ee(g,f[c]);return{c(){t=Le("svg"),r=new Oe(!0),this.h()},l(c){t=qe(c,"svg",{viewBox:!0,width:!0,height:!0});var m=B(t);r=De(m,!0),m.forEach(M),this.h()},h(){r.a=null,ve(t,g)},m(c,m){ye(c,t,m),r.m(s,t)},p(c,[m]){ve(t,g=Ve(f,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},m&1&&c[0]]))},i:pe,o:pe,d(c){c&&M(t)}}}function nt(a,t,r){return a.$$set=s=>{r(0,t=ee(ee({},t),_e(s)))},t=_e(t),[t]}class rt extends Ee{constructor(t){super(),xe(this,t,nt,tt,Ce,{})}}function it(a){let t,r,s='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 12l5 5L20 7"/>',f=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},a[0]],g={};for(let c=0;c<f.length;c+=1)g=ee(g,f[c]);return{c(){t=Le("svg"),r=new Oe(!0),this.h()},l(c){t=qe(c,"svg",{viewBox:!0,width:!0,height:!0});var m=B(t);r=De(m,!0),m.forEach(M),this.h()},h(){r.a=null,ve(t,g)},m(c,m){ye(c,t,m),r.m(s,t)},p(c,[m]){ve(t,g=Ve(f,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},m&1&&c[0]]))},i:pe,o:pe,d(c){c&&M(t)}}}function at(a,t,r){return a.$$set=s=>{r(0,t=ee(ee({},t),_e(s)))},t=_e(t),[t]}class st extends Ee{constructor(t){super(),xe(this,t,at,it,Ce,{})}}function Te(a){var F,ie,ae;let t,r,s,f,g,c,m,P,S,i,w,A,V,O,k,N,I=((F=a[4])==null?void 0:F.cancel.label)+"",Q,te,T,y,b,e=((ie=a[4])==null?void 0:ie.confirm.label)+"",n,u,p,L,j;var H=a[4].cancel.icon;function W(C,o){return{props:{class:"mr-2 h-5 w-5"}}}H&&(k=se(H,W()));var X=(ae=a[4])==null?void 0:ae.confirm.icon;function Z(C,o){return{props:{class:"mr-2 h-5 w-5"}}}return X&&(y=se(X,Z())),{c(){t=q("div"),r=q("div"),s=q("h2"),f=oe(a[1]),g=ne(),c=q("div"),m=ne(),P=q("p"),S=oe(a[2]),i=ne(),w=q("div"),A=ne(),V=q("div"),O=q("button"),k&&ce(k.$$.fragment),N=q("span"),Q=oe(I),te=ne(),T=q("button"),y&&ce(y.$$.fragment),b=q("span"),n=oe(e),this.h()},l(C){t=D(C,"DIV",{role:!0,class:!0});var o=B(t);r=D(o,"DIV",{class:!0});var l=B(r);s=D(l,"H2",{class:!0});var _=B(s);f=fe(_,a[1]),_.forEach(M),g=re(l),c=D(l,"DIV",{class:!0}),B(c).forEach(M),m=re(l),P=D(l,"P",{class:!0});var d=B(P);S=fe(d,a[2]),d.forEach(M),i=re(l),w=D(l,"DIV",{class:!0}),B(w).forEach(M),A=re(l),V=D(l,"DIV",{class:!0});var h=B(V);O=D(h,"BUTTON",{class:!0});var K=B(O);k&&Pe(k.$$.fragment,K),N=D(K,"SPAN",{});var v=B(N);Q=fe(v,I),v.forEach(M),K.forEach(M),te=re(h),T=D(h,"BUTTON",{class:!0});var E=B(T);y&&Pe(y.$$.fragment,E),b=D(E,"SPAN",{});var z=B(b);n=fe(z,e),z.forEach(M),E.forEach(M),h.forEach(M),l.forEach(M),o.forEach(M),this.h()},h(){R(s,"class","text-base-content text-start text-2xl font-bold"),R(c,"class","divider my-2"),R(P,"class","text-base-content mb-1 text-start"),R(w,"class","divider my-2"),R(O,"class","btn btn-primary inline-flex items-center"),R(T,"class","btn btn-warning text-warning-content inline-flex items-center"),R(V,"class","flex justify-end gap-2"),R(r,"class","rounded-box bg-base-100 shadow-secondary/30 pointer-events-auto flex min-w-fit max-w-md flex-col justify-between p-4 shadow-lg"),R(t,"role","dialog"),R(t,"class","pointer-events-none fixed inset-0 z-50 flex items-center justify-center")},m(C,o){ye(C,t,o),x(t,r),x(r,s),x(s,f),x(r,g),x(r,c),x(r,m),x(r,P),x(P,S),x(r,i),x(r,w),x(r,A),x(r,V),x(V,O),k&&de(k,O,null),x(O,N),x(N,Q),x(V,te),x(V,T),y&&de(y,T,null),x(T,b),x(b,n),p=!0,L||(j=[le(O,"click",Je),le(T,"click",function(){Ue(a[3])&&a[3].apply(this,arguments)}),le(t,"introstart",a[5]),le(t,"outroend",a[6]),Xe(et.call(null,t))],L=!0)},p(C,o){var l,_,d;if(a=C,(!p||o&2)&&ue(f,a[1]),(!p||o&4)&&ue(S,a[2]),o&16&&H!==(H=a[4].cancel.icon)){if(k){we();const h=k;$(h.$$.fragment,1,0,()=>{he(h,1)}),ke()}H?(k=se(H,W()),ce(k.$$.fragment),J(k.$$.fragment,1),de(k,O,N)):k=null}if((!p||o&16)&&I!==(I=((l=a[4])==null?void 0:l.cancel.label)+"")&&ue(Q,I),o&16&&X!==(X=(_=a[4])==null?void 0:_.confirm.icon)){if(y){we();const h=y;$(h.$$.fragment,1,0,()=>{he(h,1)}),ke()}X?(y=se(X,Z()),ce(y.$$.fragment),J(y.$$.fragment,1),de(y,T,b)):y=null}(!p||o&16)&&e!==(e=((d=a[4])==null?void 0:d.confirm.label)+"")&&ue(n,e)},i(C){p||(k&&J(k.$$.fragment,C),y&&J(y.$$.fragment,C),C&&Ye(()=>{p&&(u||(u=Ae(t,Ke,{y:50},!0)),u.run(1))}),p=!0)},o(C){k&&$(k.$$.fragment,C),y&&$(y.$$.fragment,C),C&&(u||(u=Ae(t,Ke,{y:50},!1)),u.run(0)),p=!1},d(C){C&&M(t),k&&he(k),y&&he(y),C&&u&&u.end(),L=!1,ze(j)}}}function ot(a){let t,r,s=a[0]&&Te(a);return{c(){s&&s.c(),t=Se()},l(f){s&&s.l(f),t=Se()},m(f,g){s&&s.m(f,g),ye(f,t,g),r=!0},p(f,[g]){f[0]?s?(s.p(f,g),g&1&&J(s,1)):(s=Te(f),s.c(),J(s,1),s.m(t.parentNode,t)):s&&(we(),$(s,1,1,()=>{s=null}),ke())},i(f){r||(J(s),r=!0)},o(f){$(s),r=!1},d(f){f&&M(t),s&&s.d(f)}}}function ft(a,t,r){let{isOpen:s}=t,{title:f}=t,{message:g}=t,{onConfirm:c}=t,{labels:m={cancel:{label:"Cancel",icon:rt},confirm:{label:"OK",icon:st}}}=t;function P(i){Me.call(this,a,i)}function S(i){Me.call(this,a,i)}return a.$$set=i=>{"isOpen"in i&&r(0,s=i.isOpen),"title"in i&&r(1,f=i.title),"message"in i&&r(2,g=i.message),"onConfirm"in i&&r(3,c=i.onConfirm),"labels"in i&&r(4,m=i.labels)},[s,f,g,c,m,P,S]}class mt extends Ee{constructor(t){super(),xe(this,t,ft,ot,Ce,{isOpen:0,title:1,message:2,onConfirm:3,labels:4})}}export{mt as C,rt as X,Je as a,st as b,_t as c,gt as d,ge as e,et as f,U as m,vt as o,me as t};
